<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BizBot Admin Dashboard</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script> 
</head>
<body>
    <div class="container">
        <aside class="sidebar">
            <h2>BizBot Admin</h2> 
            <nav>
                <ul>
                    <li><a href="dashboard.html" class="active">Dashboard</a></li>
                    <li><a href="chatbot-management.html">Chatbot Management</a></li>
                    <li><a href="training.html">Training Data</a></li>
                    <li><a href="integration.html">Integration</a></li>
                    <li><a href="settings.html">Settings</a></li>
                    <li><a href="analytics.html">Analytics</a></li>
                    <li><a href="support.html">Support</a></li>
                    <li><button class="btn-logout" onclick="logout()" >Logout</button></li>
                </ul>
            </nav>
        </aside>
        <main class="main-content">
            <header class="dashboard-header">
                <h1>Dashboard Overview</h1>
                <button>Refresh Data</button>
            </header>
            <div class="grid">
                <div class="card">
                    <h2>Total Chatbots</h2>
                    <p class="large-number" id="chatbot-count"></p> <!-- Default value for now -->
                </div>
                <div class="card">
                    <h2>Total FAQS</h2>
                    <p class="faq-number"></p>
                </div>
                <div class="card">
                    <h2>User Interactions</h2>
                    <p class="large-number">1,234</p>
                </div>
            </div>
            <div class="card">
                <h2>Feedbacks</h2>
                <div id="feedbacks-container" class="feedbacks-container">
                    <!-- Feedbacks will be dynamically inserted here -->
                </div>
            </div>
            <div class="card">
                <h2>User Engagement Trends</h2>
                <div class="chart-container">
                    <p>Chart showing user engagement trends goes here</p>
                </div>
            </div>
        </main>
    </div>
    </script>
    <script src="dashboard.js"></script>
    <script>
        async function fetchFeedback(chatbotId) {
    // Fetch feedbacks from the backend
    fetch(`/feedbacks/${chatbotId}`, {
        method: 'GET',
        headers: {
            'Authorization': `Bearer ${localStorage.getItem('token')}`  // Retrieve token from localStorage
        }
    })
    .then(response => response.json())
    .then(feedbacks => {
        if (feedbacks.length === 0) {
            document.getElementById('feedbacks-container').innerHTML = 'No feedbacks available for this chatbot.';
        } else {
            const feedbacksContainer = document.getElementById('feedbacks-container');
            feedbacks.forEach(feedback => {
                const chatbotName = feedback.chatbotId;  // Assuming you fetch chatbot data elsewhere if needed
                const rating = feedback.rating;
                const feedbackText = feedback.feedback;

                // Create feedback block
                const feedbackBlock = document.createElement('div');
                feedbackBlock.classList.add('feedback');
                
                feedbackBlock.innerHTML = `
                    <span class="chatbot-name">${chatbotName}</span>
                    <div class="rating">Rating: ${rating}</div>
                    <div class="feedback-text">${feedbackText}</div>
                `;

                feedbacksContainer.appendChild(feedbackBlock);
            });
        }
    })
    .catch(error => {
        console.error('Error fetching feedbacks:', error);
        document.getElementById('feedbacks-container').innerHTML = 'Failed to load feedbacks.';
    });
}
    </script>
</body>
</html>
